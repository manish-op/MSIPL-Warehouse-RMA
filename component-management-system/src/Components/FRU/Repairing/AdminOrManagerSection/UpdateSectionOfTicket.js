import {Form, Row, Col, Input, Select, Button} from "antd";
import { useEffect } from "react";
import AssignTechnicianAPI from "../../../API/FRU/AdminAssignTechnician/AssignTechnicianAPI";
import { useTicketDetails } from "../../RepairingContext/RepairingContext";

function UpdateSectionOfTicket(){
    const [form] = Form.useForm();
    const {ticketUpdateDetails, setTicketUpdateDetails}=useTicketDetails();

    useEffect(() => {
        if (ticketUpdateDetails) {
            form.setFieldsValue(ticketUpdateDetails);
        } else {
            form.resetFields(); 
        }
    }, [ticketUpdateDetails, form]); 

     const onFinish = async (values) => {
      const data={
        ticketId:values.id,
        technicianEmail:values.technicianEmail
      };
      await AssignTechnicianAPI(data, setTicketUpdateDetails);
  };
return(
    <div
    style={{height:"100%", overflow:"auto", width:'100%'}}>
         <h4
            style={{
              fontSize: "20px",
              color: "orange",
              textAlign: "center",
              padding: "2px",
              marginBottom: "20px",
            }}
          >
            Assign Engineer
          </h4>
         <Form
          style={{
            display: "flex",
            flexDirection: "column",
            width: "90%",
            textAlign: "center",
            padding: "5px",
          }}
          form={form}
          name="TicketDetailsUpdate"
          onFinish={onFinish}
          initialValues={ticketUpdateDetails}
        >
         
          <Row gutter={2}>
             <Col span={24}>
              <Form.Item
                label="Ticekt id"
                name="id"
                // style={{minWidth:"150px"}}
                rules={[
                  {
                    required: false
                  },
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
            <Col span={24}>
              <Form.Item
                label="Serial No"
                name="serialNo"
                rules={[
                  {
                    required: false
                  },
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
            <Col span={24}>
              <Form.Item
                label="RMA No"
                name="rmaNo"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Generated Date"
                name="generatedDate"
                rules={[
                  { required: false},
                ]}
              ><Input disabled/>
              </Form.Item>
            </Col>
            <Col span={24}>
              <Form.Item
                label="Ticket Generated By"
                name="ticketGeneratedBy"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Tech Assign Date"
                name="tech_Assign_Date"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Tech status"
                name="technicianAssign"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Assign Engineer"
                name="technician_Name"
                rules={[
                  { required: false, message: "Select Technician Name!" },
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>

               <Col span={24}>
              <Form.Item
                label="Eng Assigned By"
                name="assignByManager"
                rules={[
                  { required: false},
                ]}
              ><Input disabled/>
              </Form.Item>
            </Col>
            
                <Col span={24}>
              <Form.Item
                label="Change Engineer"
                name="technicianEmail"
                rules={[
                  { required: false, message: "Select Technician Name!" },
                ]}
              >
                 <Select
                    style={{
                      marginLeft: "2px",
                      minWidth: "30px",
                       root: {
                            minWidth: "100px",
                            textAlign: "left",
                          },
                          popup: {
                            root: {
                              minWidth: "300px",
                            },
                          },
                    }}
                  >
                    <Select.Option  value={null}>
                        Select
                      </Select.Option>
                    {ticketUpdateDetails?.employeeList.map((empEmail) => (
                      <Select.Option key={empEmail} value={empEmail}>
                        {empEmail}
                      </Select.Option>
                    ))}
                  </Select>

                    </Form.Item>
            </Col>
            

             <Col span={24}>
              <Form.Item
                label="Last Update Date"
                name="lastUpdateDate"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Ticket Status"
                name="statusOption"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             
             <Col span={24}>
              <Form.Item
                label="Region"
                name="regionName"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col>
              <Form.Item
                label="System"
                name="system"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Keyword"
                name="keywordName"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Sub Keyword"
                name="subKeywordName"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Warranty"
                name="warrantyDetails"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             
             <Col span={24}>
              <Form.Item
                label="Fault Detail"
                name="faultDetails"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>
             <Col span={24}>
              <Form.Item
                label="Fault Remark"
                name="faultRemark"
                rules={[
                  { required: false},
                ]}
              >
                <Input disabled/>
              </Form.Item>
            </Col>

            <Form.Item>
            <Button
              type="primary"
              htmlType="submit"
              style={{ textAlign: "center", textAlignLast: "center" }}
            >
              Assign Engineer
            </Button>
          </Form.Item>
            </Row>
        </Form>
    </div>
);

}
export default UpdateSectionOfTicket;